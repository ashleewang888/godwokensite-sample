"use strict";(self.webpackChunkgodwokensite_sample=self.webpackChunkgodwokensite_sample||[]).push([[5783],{3905:(e,t,r)=>{r.d(t,{Zo:()=>c,kt:()=>m});var n=r(7294);function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=n.createContext({}),p=function(e){var t=n.useContext(s),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},c=function(e){var t=p(e.components);return n.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,c=i(e,["components","mdxType","originalType","parentName"]),d=p(r),m=o,y=d["".concat(s,".").concat(m)]||d[m]||u[m]||a;return r?n.createElement(y,l(l({ref:t},c),{},{components:r})):n.createElement(y,l({ref:t},c))}));function m(e,t){var r=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=r.length,l=new Array(a);l[0]=d;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,l[1]=i;for(var p=2;p<a;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},9291:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>p});var n=r(7462),o=(r(7294),r(3905));r(4996);const a={id:"evmTask2",title:"2. Deploy a Simple Ethereum Smart Contract on Polyjuice"},l=void 0,i={unversionedId:"evmTask2",id:"version-1.2-rc1(WIP)/evmTask2",title:"2. Deploy a Simple Ethereum Smart Contract on Polyjuice",description:"Compiling and deploying a smart contract on Nervos' EVM compatible Layer 2 is a process that has a lot of similarity to the process on Ethereum. There are only a few small changes that need to be made.",source:"@site/versioned_docs/version-1.2-rc1(WIP)/evmTask2.md",sourceDirName:".",slug:"/evmTask2",permalink:"/godwokensite-sample/evmTask2",draft:!1,tags:[],version:"1.2-rc1(WIP)",frontMatter:{id:"evmTask2",title:"2. Deploy a Simple Ethereum Smart Contract on Polyjuice"},sidebar:"sidebar2",previous:{title:"1. Create account on the EVM Layer 2 Testnet",permalink:"/godwokensite-sample/evmTask1"},next:{title:"3. Issue a Smart Contract Call to the Deployed Smart Contract",permalink:"/godwokensite-sample/evmTask3"}},s={},p=[{value:"Task Instructions",id:"task-instructions",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"1. Prepare Your Ethereum Private Key",id:"1-prepare-your-ethereum-private-key",level:3},{value:"2. Clone and Setup the Code Examples Repository",id:"2-clone-and-setup-the-code-examples-repository",level:3},{value:"3. Deploy a Smart Contract",id:"3-deploy-a-smart-contract",level:3},{value:"Example Smart Contract",id:"example-smart-contract",level:4},{value:"Deployment",id:"deployment",level:4}],c={toc:p};function u(e){let{components:t,...r}=e;return(0,o.kt)("wrapper",(0,n.Z)({},c,r,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Compiling and deploying a smart contract on Nervos' EVM compatible ",(0,o.kt)("a",{parentName:"p",href:"/godwokensite-sample/structure#layer-1-layer-2"},"Layer 2")," is a process that has a lot of similarity to the process on Ethereum. There are only a few small changes that need to be made."),(0,o.kt)("h2",{id:"task-instructions"},"Task Instructions"),(0,o.kt)("p",null,"In this task you will take a very basic smart contract written in Ethereum's Solidity, compile it to EVM bytecode, and deploy it to Godwoken on Layer 2."),(0,o.kt)("p",null,"The code we will be working with in this step will compile your smart contract and deploy it. This uses the original version of Hardhat for Ethereum."),(0,o.kt)("p",null,"The instructions will provide a basic smart contract you can work with, but you should feel free to use any smart contract of your choosing."),(0,o.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,o.kt)("p",null,"Before you begin on this task you must complete the ",(0,o.kt)("a",{parentName:"p",href:"/godwokensite-sample/evmTask1"},"previous task")," to create a Godwoken account on the EVM Layer 2 Testnet. You will also need the private key and Testnet address from the previous task in order to proceed. If you have not completed it, please do so now."),(0,o.kt)("h3",{id:"1-prepare-your-ethereum-private-key"},"1. Prepare Your Ethereum Private Key"),(0,o.kt)("p",null,"You need to extract private key for your ",(0,o.kt)("strong",{parentName:"p"},"Ethereum")," account. This private key will be used by the tooling to deploy your smart contract on Layer 2."),(0,o.kt)("blockquote",null,(0,o.kt)("p",{parentName:"blockquote"},"Note: Never use a private key that is associated with a real account for any of these tasks. The following steps will show you how to extract your private key from MetaMask, but you should never do this using a MetaMask installation that you use for real funds since this could potentially leak infomation that could compromise your account.")),(0,o.kt)("p",null,"If you need instructions on how to extract your private key from MetaMask, follow the steps in ",(0,o.kt)("a",{parentName:"p",href:"/godwokensite-sample/evmTask5"},"this tutorial"),"."),(0,o.kt)("h3",{id:"2-clone-and-setup-the-code-examples-repository"},"2. Clone and Setup the Code Examples Repository"),(0,o.kt)("p",null,"In this step you will clone the code examples repository. It contains material required by this task, and future tasks."),(0,o.kt)("p",null,"Create ",(0,o.kt)("inlineCode",{parentName:"p"},"~/projects")," directory if it doesn't exist."),(0,o.kt)("p",null,"Linux/MacOS:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"mkdir -p ~/projects\n")),(0,o.kt)("p",null,"Windows (PowerShell):"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"New-Item -ItemType Directory -Force -Path ~/projects\n")),(0,o.kt)("p",null,"Enter the ",(0,o.kt)("inlineCode",{parentName:"p"},"~/projects")," directory and clone the repository."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd ~/projects\ngit clone https://github.com/nervosnetwork/layer2-evm-documentation.git\ncd layer2-evm-documentation\n")),(0,o.kt)("p",null,"Then we install all dependencies:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"yarn install-all\n")),(0,o.kt)("h3",{id:"3-deploy-a-smart-contract"},"3. Deploy a Smart Contract"),(0,o.kt)("p",null,"Hardhat will handle the process of compilation and deployment of smart contract."),(0,o.kt)("h4",{id:"example-smart-contract"},"Example Smart Contract"),(0,o.kt)("p",null,"Provided below is a simple smart contract example that you can use:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-solidity"},"pragma solidity >=0.8.0;\n\ncontract SimpleStorage {\n  uint storedData;\n\n  constructor() payable {\n    storedData = 123;\n  }\n\n  function set(uint x) public payable {\n    storedData = x;\n  }\n\n  function get() public view returns (uint) {\n    return storedData;\n  }\n}\n")),(0,o.kt)("h4",{id:"deployment"},"Deployment"),(0,o.kt)("p",null,"Replace ",(0,o.kt)("inlineCode",{parentName:"p"},"<YOUR_PK>")," below with your Ethereum private key and run Hardhat command:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"cd ~/projects/layer2-evm-documentation/code-examples/2-deploy-contract/\nPRIVATE_KEY=<YOUR_PK> npx hardhat run scripts/deploy.js --network godwoken-testnet\n")),(0,o.kt)("p",null,"After running the command, the contract should deploy without any errors. You will be presented with an Ethereum contract address."),(0,o.kt)("p",null,"Example Output:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"\u279c PRIVATE_KEY=d9066ff9f753a1898709b568119055660a77d9aae4d7a4ad677b8fb3d2a571e5 npx hardhat run scripts/deploy.js --network godwoken-testnet\n\nDeploying contracts with the account: 0xD173313A51f8fc37BcF67569b463abd89d81844f\nAccount balance: 194999999999998673136\nContract address: 0xd4A8b3018f0c79f6BD3375C89a5Db47ca11A1C35\n")))}u.isMDXComponent=!0}}]);